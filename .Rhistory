install.packages("here")
install.packages('tidyverse')
install.packages('janitor')
install.packages('lubridate')
install.packages('dplyr')
install.packages('vegan')
knitr::opts_chunk$set(echo = TRUE)
library(here)
library(janitor)
library(lubridate)
#library(calecopal)
library(tidyverse)
library(dplyr)
library(vegan)
tips = read_csv(here("data", "ghecto_repotting_root_pulling_data.csv"))
View(tips)
install.packages('RColorBrewer')
knitr::opts_chunk$set(echo = TRUE)
library(tidyverse)
library(here)
library(janitor)
library(lubridate)
library(RColorBrewer)
#just before repotting
seedling_size = read_csv(here("data", "ghecto_repotting_seedling_data.csv")) %>%
mutate(timepoint = "3")
t3 = read_csv(here("data", "ghecto_repotting_seedling_data.csv")) %>%
mutate(timepoint = "3")
#from the grow up in year 1 before repotting
seedlings = read_csv(here("data", "seedling_measurements.csv")) %>%
clean_names()
seedlings = seedlings[(match(unique(seedlings$seedling_id), seedlings$seedling_id)),] %>%
select(seedling_id, seedling_sp, soil_type)
#first measurements after repotting
post_repotting = read_csv(here("data", "post_repotting_measurements.csv")) %>%
clean_names() %>%
mutate(timepoint = "4")
#which seedling was paired with which other seedling? they share a pot number
potting = read_csv(here("data", "ghecto_neighbor_pairs.csv")) %>%
clean_names()
seedling_size = seedling_size %>%
rbind(post_repotting)
seedling_size = seedling_size %>%
left_join(seedlings)
master = seedling_size %>%
left_join(potting, by= c("seedling_id" = "seedling_1" )) %>%
left_join(potting, by= c("seedling_id" = "seedling_2" )) %>%
mutate(pot = case_when(
!is.na(pot.x) ~ pot.x,
!is.na(pot.y) ~ pot.y,
)) %>%
mutate(neighbor = case_when(
!is.na(seedling_1) ~ seedling_1,
!is.na(seedling_2) ~ seedling_2,
)) %>%
select(!c("pot.x", "pot.y", "seedling_1", "seedling_2"))
oaks = seedling_size %>%
filter(seedling_sp == "Q")%>%
mutate(zheight = (height_cm- mean(height_cm))/sd(height_cm))%>%
mutate(zdiameter = (diameter_mm- mean(diameter_mm))/sd(diameter_mm))
bigcone = seedling_size %>%
filter(seedling_sp == "P")%>%
mutate(zheight = (height_cm- mean(height_cm))/sd(height_cm))%>%
mutate(zdiameter = (diameter_mm- mean(diameter_mm))/sd(diameter_mm))%>%
filter(height_cm < 10)
View(seedlings)
neighbor.facts = master %>%
filter(timepoint == 4)   %>%
select("seedling_id", "height_cm", "diameter_mm", "seedling_sp", "soil_type") %>%
rename(neighbor = seedling_id,
neighb.height = height_cm,
neighb.diameter = diameter_mm,
neighb.spp = seedling_sp,
neighb.soil = soil_type)
master4 = master %>%
filter(timepoint ==4) %>%
left_join(neighbor.facts, by = "neighbor") %>%
filter(!is.na(neighb.height))
master4 = master4 %>%
left_join(master %>%
filter(timepoint==3) %>%
select("seedling_id", "height_cm", "diameter_mm", "chlorosis", "leaf_count") %>%
rename(lastheight = height_cm,
lastdiameter = diameter_mm,
lastchlorosis = chlorosis,
lastleaf = leaf_count)
) %>%
mutate(change.ht = height_cm - lastheight,
change.dia = diameter_mm - lastdiameter,
change.chl = chlorosis - lastchlorosis,
change.leaf = leaf_count - lastleaf
) %>%
filter(change.ht > -10)
inthehood = c(potting$seedling_1, potting$seedling_2)
t4 = post_repotting$seedling_id
t4in = t4[c(which(t4  %in% inthehood))]
master4 = distinct(master4)
sum.m4 = master4 %>%
group_by(neighbor) %>%
summarise(n())
sum.t3 = t3 %>%
group_by(seedling_id) %>%
summarise(n())
#as.numeric(duplicated(post_repotting$seedling_id))
ggplot(oaks, aes(x=soil_type, y=height_cm, fill= soil_type)) +
geom_boxplot()+
facet_wrap(~timepoint) +
labs(title = "Oak height")
ggplot(oaks, aes(x=soil_type, y=diameter_mm, fill= soil_type)) +
geom_boxplot()+
facet_wrap(~timepoint) +
labs(title = "Oak diameter")
##################
ggplot(bigcone, aes(x=soil_type, y=height_cm, fill= soil_type)) +
geom_boxplot()+
facet_wrap(~timepoint) +
labs(title = "Bigcone height")
ggplot(bigcone, aes(x=soil_type, y=diameter_mm, fill= soil_type)) +
geom_boxplot() +
facet_wrap(~timepoint) +
labs(title = "Bigcone diameter")
View(seedling_size)
View(seedling_size)
seedlings = read_csv(here("data", "seedling_measurements.csv"))
View(seedlings)
seedlings = read_csv(here("data", "seedling_measurements.csv")) %>%
clean_names()
View(seedlings)
seedlings = seedlings[(match(unique(seedlings$seedling_id), seedlings$seedling_id)),] %>%
select(seedling_id, seedling_sp, soil_type)
View(seedlings)
View(seedling_size)
View(post_repotting)
View(seedlings)
View(master)
View(potting)
master = seedling_size %>%
left_join(potting, by= c("seedling_id" = "seedling_1" )) %>%
left_join(potting, by= c("seedling_id" = "seedling_2" ))
master = seedling_size %>%
left_join(potting, by= c("seedling_id" = "seedling_1" )) %>%
left_join(potting, by= c("seedling_id" = "seedling_2" )) %>%
mutate(pot = case_when(
!is.na(pot.x) ~ pot.x,
!is.na(pot.y) ~ pot.y,
))
master = seedling_size %>%
left_join(potting, by= c("seedling_id" = "seedling_1" )) %>%
left_join(potting, by= c("seedling_id" = "seedling_2" )) %>%
mutate(pot = case_when(
!is.na(pot.x) ~ pot.x,
!is.na(pot.y) ~ pot.y,
)) %>%
mutate(neighbor = case_when(
!is.na(seedling_1) ~ seedling_1,
!is.na(seedling_2) ~ seedling_2,
))
master = seedling_size %>%
left_join(potting, by= c("seedling_id" = "seedling_1" )) %>%
left_join(potting, by= c("seedling_id" = "seedling_2" )) %>%
mutate(pot = case_when(
!is.na(pot.x) ~ pot.x,
!is.na(pot.y) ~ pot.y,
)) %>%
mutate(neighbor = case_when(
!is.na(seedling_1) ~ seedling_1,
!is.na(seedling_2) ~ seedling_2,
)) %>%
select(!c("pot.x", "pot.y", "seedling_1", "seedling_2"))
knitr::opts_chunk$set(echo = TRUE)
library(MASS)
library(tidyverse)
library(here)
library(janitor)
library(lubridate)
library(RColorBrewer)
#just before repotting
seedling_size = read_csv(here("data", "ghecto_repotting_seedling_data.csv")) %>%
mutate(timepoint = "3")
t3 = read_csv(here("data", "ghecto_repotting_seedling_data.csv")) %>%
mutate(timepoint = "3")%>%
mutate(month = lubridate::my(032021))
#from the grow up in year 1 before repotting
seedlings = read_csv(here("data", "seedling_measurements.csv")) %>%
clean_names()
seedlings = seedlings[(match(unique(seedlings$seedling_id), seedlings$seedling_id)),]%>%
dplyr::select(seedling_id, seedling_sp, soil_type)
#first measurements after repotting
post_repotting = read_csv(here("data", "post_repotting_measurements.csv")) %>%
clean_names() %>%
mutate(timepoint = "4")
t4 = post_repotting %>%
mutate(month = lubridate::my(042021))
t5 = read_csv(here("data", "seedling_data_timepoint5.csv")) %>%
clean_names() %>%
mutate(timepoint = "5")%>%
mutate(month = lubridate::my(122021))
t6 = read_csv(here("data", "seedling_measurements_winter22.csv")) %>%
clean_names() %>%
mutate(timepoint = "6")%>%
mutate(month = lubridate::my(022022))
#which seedling was paired with which other seedling? they share a pot number
potting = read_csv(here("data", "ghecto_neighbor_pairs.csv")) %>%
clean_names()
seedling_sizes = t3 %>%
bind_rows(t4, t5, t6)
seedling_size = seedling_sizes %>%
left_join(seedlings)
master_full = seedling_size %>%
left_join(potting, by= c("seedling_id" = "seedling_1" )) %>%
left_join(potting, by= c("seedling_id" = "seedling_2" )) %>%
mutate(pot = case_when(
!is.na(pot.x) ~ pot.x,
!is.na(pot.y) ~ pot.y,
)) %>%
mutate(neighbor = case_when(
!is.na(seedling_1) ~ seedling_1,
!is.na(seedling_2) ~ seedling_2,
)) %>%
dplyr::select(!c("pot.x", "pot.y", "seedling_1", "seedling_2")) %>%
filter(timepoint>3)
all3 = master_full %>%
group_by(seedling_id) %>%
summarize(n = n()) %>%
filter(n ==3)
master = master_full %>%
filter(seedling_id %in% all3$seedling_id)  %>%
mutate(total_length = height_cm + additional_height)
help = master %>%
group_by(seedling_id) %>%
summarize(n = n()) %>%
filter(n !=3)
problems = master_full %>%
filter(is.na(pot))
View(problems)
knitr::opts_chunk$set(echo = TRUE)
library(MASS)
library(tidyverse)
library(here)
library(janitor)
library(lubridate)
library(RColorBrewer)
#just before repotting
seedling_size = read_csv(here("data", "ghecto_repotting_seedling_data.csv")) %>%
mutate(timepoint = "3")
t3 = read_csv(here("data", "ghecto_repotting_seedling_data.csv")) %>%
mutate(timepoint = "3")%>%
mutate(month = lubridate::my(032021))
#from the grow up in year 1 before repotting
seedlings = read_csv(here("data", "seedling_measurements.csv")) %>%
clean_names()
seedlings = seedlings[(match(unique(seedlings$seedling_id), seedlings$seedling_id)),]%>%
dplyr::select(seedling_id, seedling_sp, soil_type)
#first measurements after repotting
post_repotting = read_csv(here("data", "post_repotting_measurements.csv")) %>%
clean_names() %>%
mutate(timepoint = "4")
t4 = post_repotting %>%
mutate(month = lubridate::my(042021))
t5 = read_csv(here("data", "seedling_data_timepoint5.csv")) %>%
clean_names() %>%
mutate(timepoint = "5")%>%
mutate(month = lubridate::my(122021))
t6 = read_csv(here("data", "seedling_measurements_winter22.csv")) %>%
clean_names() %>%
mutate(timepoint = "6")%>%
mutate(month = lubridate::my(022022))
#which seedling was paired with which other seedling? they share a pot number
potting = read_csv(here("data", "ghecto_neighbor_pairs.csv")) %>%
clean_names()
seedling_sizes = t3 %>%
bind_rows(t4, t5, t6)
seedling_size = seedling_sizes %>%
left_join(seedlings)
master_full = seedling_size %>%
left_join(potting, by= c("seedling_id" = "seedling_1" )) %>%
left_join(potting, by= c("seedling_id" = "seedling_2" )) %>%
mutate(pot = case_when(
!is.na(pot.x) ~ pot.x,
!is.na(pot.y) ~ pot.y,
)) %>%
mutate(neighbor = case_when(
!is.na(seedling_1) ~ seedling_1,
!is.na(seedling_2) ~ seedling_2,
)) %>%
dplyr::select(!c("pot.x", "pot.y", "seedling_1", "seedling_2")) %>%
filter(timepoint>3)
all3 = master_full %>%
group_by(seedling_id) %>%
summarize(n = n()) %>%
filter(n ==3)
master = master_full %>%
filter(seedling_id %in% all3$seedling_id)  %>%
mutate(total_length = height_cm + additional_height)
help = master %>%
group_by(seedling_id) %>%
summarize(n = n()) %>%
filter(n !=3)
problems = master_full %>%
filter(is.na(pot))
View(problems)
knitr::opts_chunk$set(echo = TRUE)
library(MASS)
library(tidyverse)
library(here)
library(janitor)
library(lubridate)
library(RColorBrewer)
#just before repotting
seedling_size = read_csv(here("data", "ghecto_repotting_seedling_data.csv")) %>%
mutate(timepoint = "3")
t3 = read_csv(here("data", "ghecto_repotting_seedling_data.csv")) %>%
mutate(timepoint = "3")%>%
mutate(month = lubridate::my(032021))
#from the grow up in year 1 before repotting
seedlings = read_csv(here("data", "seedling_measurements.csv")) %>%
clean_names()
seedlings = seedlings[(match(unique(seedlings$seedling_id), seedlings$seedling_id)),]%>%
dplyr::select(seedling_id, seedling_sp, soil_type)
#first measurements after repotting
post_repotting = read_csv(here("data", "post_repotting_measurements.csv")) %>%
clean_names() %>%
mutate(timepoint = "4")
t4 = post_repotting %>%
mutate(month = lubridate::my(042021))
t5 = read_csv(here("data", "seedling_data_timepoint5.csv")) %>%
clean_names() %>%
mutate(timepoint = "5")%>%
mutate(month = lubridate::my(122021))
t6 = read_csv(here("data", "seedling_measurements_winter22.csv")) %>%
clean_names() %>%
mutate(timepoint = "6")%>%
mutate(month = lubridate::my(022022))
#which seedling was paired with which other seedling? they share a pot number
potting = read_csv(here("data", "ghecto_neighbor_pairs.csv")) %>%
clean_names()
seedling_sizes = t3 %>%
bind_rows(t4, t5, t6)
seedling_size = seedling_sizes %>%
left_join(seedlings)
master_full = seedling_size %>%
left_join(potting, by= c("seedling_id" = "seedling_1" )) %>%
left_join(potting, by= c("seedling_id" = "seedling_2" )) %>%
mutate(pot = case_when(
!is.na(pot.x) ~ pot.x,
!is.na(pot.y) ~ pot.y,
)) %>%
mutate(neighbor = case_when(
!is.na(seedling_1) ~ seedling_1,
!is.na(seedling_2) ~ seedling_2,
)) %>%
dplyr::select(!c("pot.x", "pot.y", "seedling_1", "seedling_2")) %>%
filter(timepoint>3)
all3 = master_full %>%
group_by(seedling_id) %>%
summarize(n = n()) %>%
filter(n ==3)
master = master_full %>%
filter(seedling_id %in% all3$seedling_id)  %>%
mutate(total_length = height_cm + additional_height)
help = master %>%
group_by(seedling_id) %>%
summarize(n = n()) %>%
filter(n !=3)
problems = master_full %>%
filter(is.na(pot))
#finished BM
oaks = seedling_size %>%
filter(seedling_sp == "Q")%>%
mutate(zheight = (height_cm- mean(height_cm))/sd(height_cm))%>%
mutate(zdiameter = (diameter_mm- mean(diameter_mm))/sd(diameter_mm))
bigcone = seedling_size %>%
filter(seedling_sp == "P")%>%
mutate(zheight = (height_cm- mean(height_cm))/sd(height_cm))%>%
mutate(zdiameter = (diameter_mm- mean(diameter_mm))/sd(diameter_mm))%>%
filter(height_cm < 10)
